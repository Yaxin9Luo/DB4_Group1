from machine import Pin
from machine import ADC
from machine import DAC
from math import log

import machine
import utime

#adc_V_lookup = [1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 1.012941, 71471, 1.17353, 1.177647, 1.181765, 1.185882, 1.19, 1.194118, 1.198235, 1.202353, 1.206471, 1.210588, 1.213059, 1.215529, 1.218, 1.220471, 1.222941, 1.229118, 1.235294, 1.237765, 1.240235, 1.242706, 1.245177, 1.247647, 1.251765, 1.255882, 1.26, 1.263088, 1.266176, 1.269265, 1.272353, 1.278529, 1.284706, 1.286471, 1.288235, 1.29, 1.291765, 1.29353, 1.295294, 1.303235, 1.305294, 1.313529, 1.321765, 1.323529, 1.325294, 1.327059, 1.328824, 1.330588, 1.332353, 1.334118, 1.338235, 1.342353, 1.346471, 1.348529, 1.350588, 1.352647, 1.354706, 1.356765, 1.358824, 1.361912, 1.365, 1.368088, 1.377353, 1.375294, 1.379412, 1.383529, 1.387647, 1.391765, 1.395882, 1.4, 1.404118, 1.408235, 1.410706, 1.413177, 1.415647, 1.418118, 1.420588, 1.423676, 1.426765, 1.429853, 1.432941, 1.445294, 1.448382, 1.451471, 1.454559, 1.457647, 1.460118, 1.462588, 1.465059, 1.46753, 1.47, 1.476177, 1.482353, 1.484412, 1.486471, 1.488529, 1.490588, 1.492647, 1.494706, 1.498824, 1.502941, 1.507059, 1.510147, 1.513235, 1.516324, 1.519412, 1.525585177, 1.877647, 1.883824, 1.89, 1.896177, 1.902353, 1.904823, 1.907294, 1.909765, 1.912235, 1.914706, 1.917794, 1.920882, 1.923971, 1.927059, 1.930147, 1.933235, 1.936324, 1.939412, 1.943529, 1.947647, 1.951765, 1.954853, 1.957941, 1.96103, 1.964118, 1.967206, 1.970294, 1.973382, 1.976471, 1.978941, 1.981412, 1.983883, 1.986353, 1.988824, 1.992941, 1.997059, 2.001177, 2.005294, 2.009412, 2.01353, 2.016618, 2.019706, 2.022794, 2.025882, 2.028971, 2.032059, 2.035147, 2.038235, 2.044412, 2.050588, 2.054118, 2.396471, 2.398941, 2.401412, 2.403883, 2.406353, 2.408823, 2.412941, 2.417059, 2.421176, 2.425294, 2.429412, 2.433529, 2.436618, 2.439706, 2.442794, 2.445882, 2.448353, 2.450824, 2.453294, 2.455765, 2.458235, 2.462353, 2.466471, 2.470588, 2.473676, 2.476765, 2.479853, 2.482941, 2.486029, 2.489118, 2.492206, 2.495294, 2.497059, 2.498824, 2.500588, 2.502353, 2.504118, 2.505883, 2.507647, 2.510735, 2.513824, 2.516912, 2.52, 2.526176, 2.532353, 2.534412, 2.536471, 2.538529, 2.540588, 2.542647, 2.544706, 2.548824, 2.552941, 2.557059, 2.55953, 2.562, 2.564471, 2.566941, 2.569412, 2.575588, 2.581765, 2.583529, 2.585294, 2.587059, 2.588824, 2.590588, 2.592353, 2.594118, 2.597206, 2.600294, 2.603382, 2.606471, 2.60853, 2.610588, 2.612647, 2.614706, 2.616765, 2.618824, 2.622941, 2.627059, 2.631176, 2.634265, 2.637353, 2.640441, 2.643529, 2.645588, 2.647647, 2.649706, 2.651765, 2.653824, 2.655882, 2.66, 2.664118, 2.668235, 2.67, 2.671765, 2.67353, 2.675294, 2.677059, 2.678824, 2.680588, 2.683676, 2.686765, 2.689853, 2.69103, 2.927647, 2.929706, 2.931765, 2.933824, 2.935883, 2.937941, 2.94, 2.941544, 2.943088, 2.944633, 2.946177, 2.947721, 2.949265, 2.950809, 2.952353, 2.955441, 2.958529, 2.961618, 2.964706, 2.96625, 2.967794, 2.969338, 2.970882, 2.972427, 2.973971, 2.975515, 2.977059, 2.979118, 2.981177, 2.983235, 2.985294, 2.987353, 2.989412, 2.991882, 2.994353, 2.996824, 2.999294, 3.001765, 3.003309, 3.004853, 3.006397, 3.007941, 3.009485, 3.011029, 3.012574, 3.014118, 3.016177, 3.018235, 3.020294, 3.022353, 3.024412, 3.026471, 3.027843, 3.029216, 3.030588, 3.031961, 3.033334, 3.034706, 3.036078, 3.037451, 3.038824, 3.041294, 3.043765, 3.046236, 3.048706, 3.051177, 3.053236, 3.055294, 3.057353, 3.059412, 3.061471, 3.063529, 3.064765, 3.066, 3.067235, 3.068471, 3.069706, 3.070941, 3.072176, 3.073412, 3.074647, 3.075882, 3.078353, 3.080824, 3.083294, 3.085765, 3.088235, 3.089608, 3.090981, 3.092353, 3.093726, 3.095098, 3.096471, 3.097843, 3.099216, 3.100588, 3.103677, 3.106765, 3.109853, 3.112941, 3.114706, 3.116471, 3.118235, 3.12, 3.121765, 3.12353, 3.131471, 3.15]

#adc_V_lookup = [0.03088236, 0.07411765, 0.0782353, 0.08235294, 0.08647059, 0.08955883, 0.09264707, 0.0957353, 0.09882354, 0.1029412, 0.1070588, 0.1111765, 0.1142647, 0.117353, 0.1204412, 0.1235294, 0.1276471, 0.1317647, 0.1358824, 0.1389706, 0.1420588, 0.1451471, 0.1482353, 0.1513235, 0.1544118, 0.1575, 0.1605882, 0.1647059, 0.1688235, 0.1729412, 0.1760294, 0.1791177, 0.1822059, 0.1852941, 0.1894118, 0.1935294, 0.1976471, 0.2007353, 0.2038235, 0.2069118, 0.21, 0.2141177, 0.2182353, 0.222353, 0.2254412, 0.2285294, 0.2316177, 0.2347059, 0.2377941, 0.2408824, 0.2439706, 0.2470588, 0.2511765, 0.2552941, 0.2594118, 0.2625, 0.2655883, 0.2686765, 0.2717647, 0.2758824, 0.28, 0.2841177, 0.2872059, 0.2902942, 0.2933824, 0.2964706, 0.3005883, 0.3047059, 0.3088235, 0.3119118, 0.315, 0.3180882, 0.3211765, 0.3242647, 0.327353, 0.3304412, 0.3335294, 0.3366177, 0.3397059, 0.3427941, 0.3458824, 0.3489706, 0.3520588, 0.3551471, 0.3582353, 0.3644118, 0.3705883, 0.3730588, 0.3755294, 0.378, 0.3804706, 0.3829412, 0.3952941, 0.3983824, 0.4014706, 0.4045588, 0.4076471, 0.4117647, 0.4158824, 0.42, 0.4230883, 0.4261765, 0.4292647, 0.432353, 0.4354412, 0.4385294, 0.4416177, 0.4447059, 0.4488235, 0.4529412, 0.4570589, 0.4601471, 0.4632353, 0.4663236, 0.4694118, 0.4735294, 0.4776471, 0.4817647, 0.484853, 0.4879412, 0.4910295, 0.4941177, 0.4982353, 0.502353, 0.5064706, 0.5095589, 0.5126471, 0.5157353, 0.5188236, 0.5219118, 0.525, 0.5280883, 0.5311765, 0.5336471, 0.5361176, 0.5385882, 0.5410588, 0.5435295, 0.547647, 0.5517647, 0.5558824, 0.5589706, 
#0.5620589, 0.5651471, 0.5682353, 0.5713236, 0.5744118, 0.5775001, 0.5805883, 0.5867648, 0.5929412, 0.5960294, 0.5991177, 0.6022058, 0.6052941, 0.6094118, 0.6135294, 0.6176471, 0.6207353, 0.6238235, 0.6269117, 0.63, 0.6330882, 0.6361765, 0.6392647, 0.642353, 0.6454412, 0.6485294, 0.6516176, 0.6547059, 0.6588235, 0.6629412, 0.6670588, 0.670147, 0.6732353, 0.6763235, 0.6794118, 0.6825, 0.6855883, 0.6886765, 0.6917647, 0.6958824, 0.7, 0.7041177, 0.7072059, 0.7102942, 0.7133823, 0.7164706, 0.7205883, 0.7247059, 0.7288236, 0.7312942, 0.7337647, 0.7362353, 0.7387059, 0.7411765, 0.7452941, 0.7494118, 0.7535295, 0.7566176, 0.7597059, 0.7627941, 0.7658824, 0.7689706, 0.7720589, 0.7751471, 0.7782353, 0.78, 0.7817647, 0.7835294, 0.7852942, 0.7870589, 0.7888236, 0.7905883, 0.7936765, 0.7967648, 0.7998529, 0.8029412, 0.8060294, 0.8091177, 0.8122059, 0.8152942, 0.8183824, 0.8214706, 0.8245588, 0.8276471, 0.8317648, 0.8358824, 0.8400001, 0.8430882, 0.8461765, 0.8492647, 0.852353, 0.8554412, 0.8585295, 0.8616177, 0.8647059, 0.8677941, 0.8708824, 0.8739706, 0.8770589, 0.8832354, 0.8894118, 0.8925, 0.8955883, 0.8986765, 0.9017648, 0.9042353, 0.906706, 0.9091764, 0.9116471, 0.9141177, 0.9182354, 0.9223529, 0.9264707, 0.9295588, 0.9326471, 0.9357353, 0.9388236, 0.9419118, 0.9450001, 0.9480883, 0.9511765, 0.953647, 0.9561177, 0.9585882, 0.9610589, 0.9635295, 0.9676472, 0.9717647, 0.9758824, 0.9800001, 0.9841176, 0.9882354, 0.9923531, 0.9964705, 1.000588, 1.003677, 1.006765, 1.009853, 1.012941, 1.016029, 1.019118, 1.022206, 1.025294, 1.028382, 1.031471, 1.034559, 1.037647, 1.041765, 1.045882, 1.05, 1.053088, 1.056177, 1.059265, 1.062353, 1.065441, 1.068529, 1.071618, 1.074706, 1.078824, 1.082941, 1.087059, 1.091177, 1.095294, 1.099412, 1.1025, 1.105588, 1.108677, 1.111765, 1.114235, 1.116706, 1.119177, 1.121647, 1.124118, 1.128235, 1.132353, 1.136471, 1.139559, 1.142647, 1.145735, 1.148824, 1.152941, 1.157059, 1.161177, 1.164265, 1.167353, 1.170441, 1.17353, 1.179706, 1.185882, 1.188971, 1.192059, 1.195147, 1.198235, 1.202353, 
#1.206471, 1.210588, 1.213676, 1.216765, 1.219853, 1.222941, 1.226029, 1.229118, 1.232206, 1.235294, 1.239412, 1.243529, 1.247647, 1.250735, 1.253824, 1.256912, 1.26, 1.263088, 1.266176, 1.269265, 1.272353, 1.276471, 1.280588, 1.284706, 1.287794, 1.290882, 1.293971, 1.297059, 1.300147, 1.303235, 1.306324, 1.309412, 1.3125, 1.315588, 1.318676, 1.321765, 1.325882, 1.33, 1.334118, 1.337206, 1.340294, 1.343382, 1.346471, 1.350588, 1.354706, 1.358824, 1.362941, 1.367059, 1.371176, 1.373647, 1.376118, 1.378588, 
#1.381059, 1.383529, 1.386618, 1.389706, 1.392794, 1.395882, 1.398971, 1.402059, 1.405147, 1.408235, 1.411324, 1.414412, 1.4175, 1.420588, 1.424706, 1.428824, 1.432941, 1.436029, 1.439118, 1.442206, 1.445294, 1.448382, 1.451471, 1.454559, 1.457647, 1.461765, 1.465882, 1.47, 1.473088, 1.476177, 1.479265, 1.482353, 1.486471, 1.490588, 1.494706, 1.497794, 1.500882, 1.503971, 1.507059, 1.511177, 1.515294, 1.519412, 1.5225, 1.525588, 1.528677, 1.531765, 1.534853, 1.537941, 1.541029, 1.544118, 1.547206, 1.550294, 1.553382, 1.556471, 1.559559, 1.562647, 1.565735, 1.568824, 1.571912, 1.575, 1.578088, 1.581177, 1.584265, 1.587353, 1.590441, 1.593529, 1.597647, 1.601765, 1.605882, 1.608971, 1.612059, 1.615147, 1.618235, 1.621324, 1.624412, 1.6275, 1.630588, 1.633677, 1.636765, 1.639853, 1.642941, 1.647059, 1.651177, 1.655294, 1.657765, 1.660235, 1.662706, 1.665176, 1.667647, 1.673824, 1.68, 1.683088, 1.686177, 1.689265, 1.692353, 1.696471, 1.700588, 1.704706, 1.707176, 1.709647, 1.712118, 1.714588, 1.717059, 1.721177, 1.725294, 1.729412, 1.7325, 1.735588, 1.738677, 1.741765, 1.744853, 1.747941, 1.751029, 1.754118, 1.758235, 1.762353, 1.766471, 1.770588, 1.774706, 1.778824, 1.781912, 1.785, 1.788088, 1.791177, 1.793647, 1.796118, 1.798588, 1.801059, 1.80353, 1.806618, 1.809706, 1.812794, 1.815882, 1.818971, 1.822059, 1.825147, 1.828235, 1.834412, 1.840588, 1.843059, 1.845529, 1.848, 1.850471, 1.852941, 1.859118, 1.865294, 1.868382, 1.871471, 1.874559, 1.877647, 1.880735, 1.883824, 1.886912, 1.89, 1.893088, 1.896177, 
#1.899265, 1.902353, 1.90647, 1.910588, 1.914706, 1.917794, 1.920882, 1.923971, 1.927059, 1.931176, 1.935294, 1.939412, 1.9425, 1.945588, 1.948677, 1.951765, 1.954853, 1.957941, 1.96103, 1.964118, 1.976471, 1.979559, 1.982647, 1.985735, 1.988824, 1.991912, 1.995, 1.998088, 2.001177, 2.004265, 2.007353, 2.010441, 2.01353, 2.017647, 2.021765, 2.025882, 2.03, 2.034118, 2.038235, 2.040294, 2.042353, 2.044412, 2.046471, 2.048529, 2.050588, 2.056765, 2.062941, 2.067059, 2.071177, 2.075294, 2.078382, 2.081471, 2.084559, 2.087647, 2.090735, 2.093824, 2.096912, 2.1, 2.103088, 2.106177, 2.109265, 2.112353, 2.115441, 2.11853, 2.121618, 2.124706, 2.128824, 2.132941, 2.137059, 2.140147, 2.143235, 2.146324, 2.149412, 2.1525, 2.155588, 2.158677, 2.161765, 2.165882, 2.17, 2.174118, 2.178235, 2.182353, 2.186471, 2.190588, 2.194706, 2.198824, 2.201912, 2.205, 2.208088, 2.211177, 2.214265, 2.217353, 2.220441, 2.22353, 2.229706, 2.235883, 2.237941, 2.24, 2.242059, 2.244118, 2.246176, 2.248235, 2.250706, 2.253176, 2.255647, 2.258118, 2.260588, 2.264706, 2.268824, 2.272941, 2.277059, 2.281177, 2.285294, 2.288383, 2.291471, 2.294559, 2.297647, 2.300735, 2.303824, 2.306912, 2.31, 2.313088, 2.316177, 2.319265, 2.322353, 2.325441, 2.32853, 2.331618, 2.334706, 2.337794, 2.340883, 2.343971, 2.347059, 2.350147, 2.353235, 2.356324, 2.359412, 2.361176, 2.362941, 2.364706, 2.366471, 2.368235, 2.37, 2.371765, 2.374853, 2.377941, 2.381029, 2.384118, 2.387206, 2.390294, 2.393382, 2.396471, 2.399559, 2.402647, 2.405735, 2.408823, 2.412941, 2.417059, 2.421176, 2.423647, 2.426118, 2.428588, 2.431059, 2.433529, 2.437647, 2.441765, 2.445882, 2.447941, 2.45, 2.452059, 2.454118, 2.456177, 2.458235, 2.464412, 2.470588, 2.473676, 2.476765, 2.479853, 2.482941, 2.486029, 2.489118, 2.492206, 2.495294, 2.498382, 2.501471, 2.504559, 2.507647, 2.510735, 2.513824, 2.516912, 2.52, 2.522471, 2.524941, 2.527412, 2.529882, 2.532353, 2.536471, 2.540588, 2.544706, 2.546765, 2.548824, 2.550882, 2.552941, 2.555, 2.557059, 2.563235, 2.569412, 2.5725, 2.575588, 2.578676, 2.581765, 2.584853, 2.587941, 2.591029, 2.594118, 2.596588, 2.599059, 2.60153, 2.604, 2.606471, 2.609559, 2.612647, 2.615735, 2.618824, 2.620883, 2.622941, 2.625, 2.627059, 2.629118, 2.631176, 2.634265, 2.637353, 2.640441, 2.643529, 2.646, 2.648471, 2.650941, 2.653412, 2.655882, 2.658971, 2.662059, 2.665147, 2.668235, 2.671324, 2.674412, 2.6775, 2.680588, 2.683059, 2.685529, 2.688, 2.690471, 2.692941, 2.695412, 2.697882, 2.700353, 2.702824, 2.705294, 2.708382, 2.711471, 2.714559, 2.717647, 2.719706, 2.721765, 2.723824, 2.725883, 2.727941, 2.73, 2.733088, 2.736176, 2.739265, 2.742353, 2.744412, 2.746471, 2.748529, 2.750588, 2.752647, 2.754706, 2.767059, 2.769118, 2.771177, 2.773235, 2.775294, 2.777353, 2.779412, 2.781882, 2.784353, 2.786824, 2.789294, 2.791765, 2.793824, 2.795882, 2.797941, 2.8, 2.802059, 2.804118, 2.807206, 2.810294, 2.813382, 2.816471, 2.81853, 2.820588, 2.822647, 2.824706, 2.826765, 2.828824, 2.831294, 2.833765, 2.836236, 2.838706, 2.841177, 2.843235, 2.845294, 2.847353, 2.849412, 2.851471, 2.853529, 2.856, 2.858471, 2.860941, 2.863412, 2.865882, 2.868353, 2.870824, 2.873294, 2.875765, 2.878235, 2.88, 2.881765, 2.883529, 2.885294, 2.887059, 2.888824, 2.890588, 2.892647, 2.894706, 2.896765, 2.898824, 2.900883, 2.902941, 2.905412, 2.907882, 2.910353, 2.912824, 2.915294, 2.917353, 2.919412, 2.921471, 2.92353, 2.925588, 2.927647, 2.929191, 2.930735, 2.93228, 2.933824, 2.935368, 2.936912, 2.938456, 2.94, 2.942059, 2.944118, 2.946177, 2.948236, 2.950294, 2.952353, 2.954823, 2.957294, 2.959765, 2.962235, 2.964706, 2.966765, 2.968824, 2.970882, 2.972941, 2.975, 2.977059, 2.979118, 2.981177, 2.983235, 2.985294, 2.987353, 2.989412, 2.990956, 2.9925, 2.994044, 2.995588, 2.997132, 2.998676, 3.000221, 3.001765, 3.003824, 3.005883, 3.007941, 3.01, 3.012059, 3.014118, 3.017206, 3.020294, 3.023382, 3.026471, 3.027706, 3.028941, 3.030177, 3.031412, 3.032647, 3.033883, 3.035118, 3.036353, 3.037588, 3.038824, 3.040883, 3.042941, 3.045, 3.047059, 3.049118, 3.051177, 3.052941, 3.054706, 3.056471, 3.058235, 3.06, 3.061765, 3.063529, 3.065588, 3.067647, 3.069706, 3.071765, 3.073823, 3.075882, 3.077647, 3.079412, 3.081177, 3.082941, 3.084706, 3.086471, 3.088235, 3.09, 3.091765, 3.093529, 3.095294, 3.097059, 3.098824, 3.100588, 3.102647, 3.104706, 3.106765, 3.108824, 3.110882, 3.112941, 3.114314, 3.115686, 3.117059, 3.118431, 3.119804, 3.121177, 3.122549, 3.123922, 3.125294, 3.127353, 3.129412, 3.131471, 3.13353, 3.135588, 3.137647, 3.139412, 3.141177, 3.142941, 3.144706, 3.146471, 3.148236, 3.15, 3.15, 3.15, 3.15, 3.15, 3.15, 3.15, 3.15, 3.15, 3.15, 3.15]


#adc_V_lookup = [0.03705883, 0.02161765, 0.0432353, 0.06485295, 0.08647059, 0.09264707, 0.09882354, 0.1012941, 0.1037647, 0.1062353, 0.1087059, 0.1111765, 0.117353, 0.1235294, 0.1266177, 0.1297059, 0.1327941, 0.1358824, 0.14, 0.1441177, 0.1482353, 0.1513235, 0.1544118, 0.1575, 0.1605882, 0.1636765, 0.1667647, 0.1698529, 0.1729412, 0.1770588, 0.1811765, 0.1852941, 0.1883824, 0.1914706, 0.1945588, 0.1976471, 0.2017647, 0.2058824, 0.21, 0.2141177, 0.2182353, 0.222353, 0.2254412, 0.2285294, 0.2316177, 0.2347059, 0.2377941, 0.2408824, 0.2439706, 0.2470588, 0.2511765, 0.2552941, 0.2594118, 0.2625, 0.2655883, 0.2686765, 0.2717647, 
#0.2758824, 0.28, 0.2841177, 0.2872059, 0.2902942, 0.2933824, 0.2964706, 0.3005883, 0.3047059, 0.3088235, 0.3129412, 0.3170588, 0.3211765, 0.3242647, 0.327353, 0.3304412, 0.3335294, 0.3376471, 0.3417647, 0.3458824, 0.348353, 0.3508235, 0.3532941, 0.3557647, 0.3582353, 0.3644118, 0.3705883, 0.3730588, 0.3755294, 0.378, 0.3804706, 0.3829412, 0.3860294, 0.3891177, 0.3922059, 0.3952941, 0.3983824, 0.4014706, 0.4045588, 0.4076471, 0.4117647, 0.4158824, 0.42, 0.4241177, 0.4282353, 0.432353, 0.4354412, 0.4385294, 0.4416177, 0.4447059, 0.4508824, 0.4570589, 0.4595294, 0.462, 0.4644706, 0.4669412, 0.4694118, 0.4735294, 0.4776471, 0.4817647, 0.484853, 0.4879412, 0.4910295, 0.4941177, 0.4982353, 0.502353, 0.5064706, 0.5095589, 0.5126471, 0.5157353, 0.5188236, 0.5212941, 0.5237647, 0.5262353, 0.5287059, 0.5311765, 0.5352941, 0.5394118, 0.5435295, 0.5466177, 0.5497059, 0.5527942, 0.5558824, 0.56, 0.5641177, 0.5682353, 0.5723529, 0.5764706, 0.5805883, 0.5830588, 0.5855294, 0.588, 0.5904706, 0.5929412, 0.5991177, 0.6052941, 0.6077647, 0.6102353, 0.6127059, 0.6151765, 0.6176471, 0.6238235, 0.63, 0.6330882, 0.6361765, 0.6392647, 0.642353, 0.6454412, 0.6485294, 0.6516176, 0.6547059, 0.6577941, 0.6608824, 0.6639706, 0.6670588, 0.6711765, 0.6752942, 0.6794118, 0.6835294, 0.6876471, 0.6917647, 0.6958824, 0.7, 0.7041177, 0.7072059, 0.7102942, 0.7133823, 0.7164706, 0.7195588, 0.7226471, 
#0.7257353, 0.7288236, 0.7312942, 0.7337647, 0.7362353, 0.7387059, 0.7411765, 0.747353, 0.7535295, 0.7566176, 0.7597059, 0.7627941, 0.7658824, 0.7689706, 0.7720589, 0.7751471, 0.7782353, 0.7807059, 0.7831765, 0.785647, 0.7881176, 0.7905883, 0.7947059, 0.7988235, 0.8029412, 0.8060294, 0.8091177, 0.8122059, 0.8152942, 0.8183824, 0.8214706, 0.8245588, 0.8276471, 0.8317648, 0.8358824, 0.8400001, 0.8430882, 0.8461765, 0.8492647, 0.852353, 0.8585295, 0.8647059, 0.8671764, 0.8696471, 0.8721176, 0.8745883, 0.8770589, 0.8811766, 0.8852942, 0.8894118, 0.8925, 0.8955883, 0.8986765, 0.9017648, 0.9058825, 0.91, 0.9141177, 
#0.9172059, 0.9202942, 0.9233824, 0.9264707, 0.9295588, 0.9326471, 0.9357353, 0.9388236, 0.9419118, 0.9450001, 0.9480883, 0.9511765, 0.953647, 0.9561177, 0.9585882, 0.9610589, 0.9635295, 0.9676472, 0.9717647, 0.9758824, 0.9789706, 0.9820589, 0.9851471, 0.9882354, 0.9923531, 0.9964705, 1.000588, 1.003677, 1.006765, 1.009853, 1.012941, 1.017059, 1.021176, 1.025294, 1.028382, 1.031471, 1.034559, 1.037647, 1.041765, 1.045882, 1.05, 1.053088, 1.056177, 1.059265, 1.062353, 1.065441, 1.068529, 1.071618, 1.074706, 1.080882, 1.087059, 1.089529, 1.092, 1.094471, 1.096941, 1.099412, 1.103529, 1.107647, 1.111765, 1.114853, 1.117941, 1.121029, 1.124118, 1.128235, 1.132353, 1.136471, 1.139559, 1.142647, 1.145735, 1.148824, 1.151912, 1.155, 1.158088, 1.161177, 1.165294, 1.169412, 1.17353, 1.176618, 1.179706, 1.182794, 1.185882, 1.192059, 1.198235, 1.200706, 1.203176, 1.205647, 1.208118, 1.210588, 1.214706, 1.218824, 1.222941, 
#1.226029, 1.229118, 1.232206, 1.235294, 1.238382, 1.241471, 1.244559, 1.247647, 1.251765, 1.255882, 1.26, 1.262059, 1.264118, 1.266176, 1.268235, 1.270294, 1.272353, 1.278529, 1.284706, 1.288824, 1.292941, 1.297059, 1.300147, 1.303235, 1.306324, 1.309412, 1.3125, 1.315588, 1.318676, 1.321765, 1.325882, 1.33, 1.334118, 1.337206, 1.340294, 1.343382, 1.346471, 1.349559, 1.352647, 1.355735, 1.358824, 1.362941, 1.367059, 1.371176, 1.377353, 1.383529, 1.389706, 1.395882, 1.397426, 1.398971, 1.400515, 1.402059, 1.403603, 1.405147, 1.406691, 1.408235, 1.412353, 1.416471, 1.420588, 1.423676, 1.426765, 1.429853, 1.432941, 1.436029, 1.439118, 1.442206, 1.445294, 1.451471, 1.457647, 1.460735, 1.463824, 1.466912, 1.47, 1.474118, 1.478235, 1.482353, 1.485441, 1.488529, 1.491618, 1.494706, 1.497177, 1.499647, 1.502118, 1.504588, 1.507059, 1.511177, 1.515294, 1.519412, 1.52353, 1.527647, 1.531765, 1.534853, 1.537941, 1.541029, 1.544118, 1.548235, 1.552353, 1.556471, 1.558941, 1.561412, 1.563882, 1.566353, 1.568824, 1.571912, 1.575, 1.578088, 1.581177, 1.584265, 1.587353, 1.590441, 1.593529, 1.596618, 1.599706, 1.602794, 1.605882, 1.61, 1.614118, 1.618235, 1.621324, 1.624412, 1.6275, 1.630588, 1.633677, 1.636765, 1.639853, 1.642941, 1.647059, 1.651177, 1.655294, 1.658382, 1.661471, 1.664559, 1.667647, 1.671765, 1.675882, 1.68, 1.683088, 1.686177, 1.689265, 1.692353, 1.695441, 1.698529, 1.701618, 1.704706, 1.710882, 1.717059, 1.720147, 1.723235, 1.726324, 1.729412, 1.7325, 1.735588, 1.738677, 1.741765, 1.744853, 1.747941, 1.751029, 
#1.754118, 1.758235, 1.762353, 1.766471, 1.770588, 1.774706, 1.778824, 1.781912, 1.785, 1.788088, 1.791177, 1.795294, 1.799412, 1.80353, 1.806, 1.808471, 1.810941, 1.813412, 1.815882, 1.818353, 1.820824, 1.823294, 1.825765, 1.828235, 1.832353, 1.836471, 1.840588, 1.844706, 1.848824, 1.852941, 1.85603, 1.859118, 1.862206, 1.865294, 1.869412, 1.87353, 1.877647, 1.880735, 1.883824, 1.886912, 1.89, 1.896177, 1.902353, 1.904412, 1.90647, 1.908529, 1.910588, 1.912647, 1.914706, 1.918823, 1.922941, 1.927059, 1.931176, 1.935294, 1.939412, 1.943529, 1.947647, 1.951765, 1.954853, 1.957941, 1.96103, 1.964118, 1.967206, 1.970294, 1.973382, 1.976471, 1.980588, 1.984706, 1.988824, 1.991912, 1.995, 1.998088, 2.001177, 2.005294, 2.009412, 2.01353, 2.016618, 2.019706, 2.022794, 2.025882, 2.03, 2.034118, 2.038235, 2.040706, 2.043176, 2.045647, 2.048118, 2.050588, 2.056765, 2.062941, 2.065412, 2.067882, 2.070353, 2.072824, 2.075294, 2.079412, 2.083529, 2.087647, 2.090118, 2.092588, 2.095059, 2.097529, 2.1, 2.106177, 2.112353, 2.114824, 2.117294, 2.119765, 2.122235, 2.124706, 2.128824, 2.132941, 2.137059, 2.141176, 2.145294, 2.149412, 2.151882, 2.154353, 2.156824, 2.159294, 2.161765, 2.167941, 2.174118, 2.177206, 2.180294, 2.183383, 
#2.186471, 2.189559, 2.192647, 2.195735, 2.198824, 2.202941, 2.207059, 2.211177, 2.214265, 2.217353, 2.220441, 2.22353, 2.227647, 2.231765, 2.235883, 2.238971, 2.242059, 2.245147, 2.248235, 2.251324, 2.254412, 2.2575, 2.266765, 2.264118, 2.267647, 2.271177, 2.274706, 2.278235, 2.281765, 2.285294, 2.287353, 2.289412, 2.291471, 2.29353, 2.295588, 2.297647, 2.301765, 2.305882, 2.31, 2.314118, 2.318235, 2.322353, 2.325441, 2.32853, 2.331618, 2.334706, 2.337794, 2.340883, 2.343971, 2.347059, 2.351177, 2.355294, 2.359412, 2.361882, 2.364353, 2.366824, 2.369294, 2.371765, 2.374853, 2.377941, 2.381029, 2.384118, 2.387206, 2.390294, 2.393382, 2.396471, 2.400588, 2.404706, 2.408823, 2.411912, 2.415, 2.418088, 2.421176, 2.424265, 2.427353, 2.430441, 2.433529, 2.436618, 2.439706, 2.442794, 2.445882, 2.448971, 2.452059, 2.455147, 2.458235, 2.462353, 2.466471, 2.470588, 2.473059, 2.475529, 2.478, 2.480471, 2.482941, 2.487059, 2.491177, 2.495294, 2.498382, 2.501471, 2.504559, 2.507647, 2.510735, 2.513824, 2.516912, 2.52, 2.523088, 2.526176, 2.529265, 2.532353, 2.534824, 2.537294, 2.539765, 2.542235, 2.544706, 2.547794, 2.550882, 2.553971, 2.557059, 2.560147, 2.563235, 2.566324, 2.569412, 2.5725, 2.575588, 2.578676, 2.581765, 2.584853, 2.587941, 2.591029, 2.594118, 2.596588, 2.599059, 2.60153, 2.604, 2.606471, 2.610588, 2.614706, 2.618824, 2.620883, 2.622941, 2.625, 2.627059, 2.629118, 2.631176, 2.635294, 2.639412, 2.643529, 2.645074, 2.646618, 2.648162, 2.649706, 2.65125, 2.652794, 2.654338, 2.655882, 2.658971, 2.662059, 2.665147, 2.668235, 2.671324, 2.674412, 2.6775, 2.680588, 2.683676, 2.686765, 2.689853, 2.692941, 2.695, 2.697059, 2.699118, 2.701177, 2.703235, 2.705294, 2.708382, 2.711471, 2.714559, 2.717647, 2.719706, 2.721765, 2.723824, 2.725883, 2.727941, 2.73, 2.732471, 2.734941, 2.737412, 2.739882, 2.742353, 2.744824, 2.747294, 2.749765, 2.752235, 2.754706, 2.756765, 2.758824, 2.760882, 2.762941, 2.765, 2.767059, 2.770147, 2.773235, 2.776324, 2.779412, 2.781471, 2.78353, 2.785588, 2.787647, 2.789706, 2.791765, 2.794853, 2.797941, 2.801029, 2.804118, 2.805882, 2.807647, 2.809412, 2.811176, 2.812941, 2.814706, 2.816471, 2.81853, 2.820588, 2.822647, 2.824706, 2.826765, 2.828824, 2.830883, 2.832941, 2.835, 2.837059, 2.839118, 2.841177, 2.843235, 2.845294, 2.847353, 2.849412, 2.851471, 2.853529, 2.856, 2.858471, 2.860941, 2.863412, 2.865882, 2.868971, 2.872059, 2.875147, 2.878235, 2.88, 2.881765, 2.883529, 2.885294, 2.887059, 2.888824, 2.890588, 2.892647, 2.894706, 2.896765, 2.898824, 2.900883, 2.902941, 2.905, 2.907059, 2.909118, 2.911177, 2.913235, 2.915294, 2.917059, 2.918824, 2.920588, 2.922353, 2.924118, 2.925883, 2.927647, 2.930118, 2.932588, 2.935059, 2.93753, 2.94, 2.941765, 2.94353, 2.945294, 2.947059, 2.948823, 2.950588, 2.952353, 2.954118, 2.955883, 2.957647, 2.959412, 2.961176, 2.962941, 2.964706, 2.966765, 2.968824, 2.970882, 2.972941, 2.975, 2.977059, 2.979529, 2.982, 2.984471, 2.986941, 2.989412, 2.990956, 2.9925, 2.994044, 2.995588, 2.997132, 2.998676, 3.000221, 3.001765, 3.003824, 3.005883, 3.007941, 3.01, 3.012059, 3.014118, 3.016588, 3.019059, 3.02153, 3.024, 3.026471, 3.027843, 3.029216, 3.030588, 3.031961, 3.033334, 3.034706, 3.036078, 3.037451, 3.038824, 3.040883, 3.042941, 3.045, 3.047059, 3.049118, 3.051177, 3.053236, 3.055294, 3.057353, 3.059412, 3.061471, 3.063529, 3.065074, 3.066618, 3.068162, 3.069706, 3.07125, 
#3.072794, 3.074338, 3.075882, 3.077941, 3.08, 3.082059, 3.084118, 3.086176, 3.088235, 3.09, 3.091765, 3.093529, 3.095294, 3.097059, 3.098824, 3.100588, 3.102133, 3.103677, 3.105221, 3.106765, 3.108309, 3.109853, 3.111397, 3.112941, 3.114706, 3.116471, 3.118235, 3.12, 3.121765, 3.12353, 3.125294, 3.127059, 3.128824, 3.130588, 3.132353, 3.134118, 3.135883, 3.137647, 3.139191, 3.140735, 3.14228, 3.143824, 3.145368, 3.146912, 3.148456, 3.15, 3.15, 3.15, 3.15, 3.15, 3.15, 3.15, 3.15, 3.15, 3.15, 3.15, 3.15, 3.15, 3.15]

adc_V_lookup =[0.02470588, 0.02058824, 0.04117647, 0.06176471, 0.06485295, 0.06794118, 0.07102942, 0.07411765, 0.0782353, 0.08235294, 0.08647059, 0.08955883, 0.09264707, 0.0957353, 0.09882354, 0.1029412, 0.1070588, 0.1111765, 0.1142647, 0.117353, 0.1204412, 0.1235294, 0.1266177, 0.1297059, 0.1327941, 0.1358824, 0.14, 0.1441177, 0.1482353, 0.1513235, 0.1544118, 0.1575, 0.1605882, 0.1636765, 0.1667647, 0.1698529, 0.1729412, 0.1760294, 0.1791177, 0.1822059, 0.1852941, 0.1883824, 0.1914706, 0.1945588, 0.1976471, 0.2017647, 0.2058824, 0.21, 0.2141177, 0.2182353, 0.222353, 0.2264706, 0.2305882, 0.2347059, 0.2371765, 0.2396471, 0.2421177, 0.2445882, 0.2470588, 0.2511765, 0.2552941, 0.2594118, 0.2625, 0.2655883, 0.2686765, 0.2717647, 0.2758824, 0.28, 0.2841177, 0.2865882, 0.2890588, 0.2915294, 0.294, 0.2964706, 0.3005883, 0.3047059, 0.3088235, 0.3119118, 0.315, 0.3180882, 0.3211765, 0.3242647, 0.327353, 0.3304412, 0.3335294, 0.3397059, 0.3458824, 0.3489706, 0.3520588, 0.3551471, 0.3582353, 0.3613235, 0.3644118, 0.3675, 0.3705883, 0.3736765, 0.3767647, 0.379853, 0.3829412, 0.3860294, 
0.3891177, 0.3922059, 0.3952941, 0.3994118, 0.4035295, 0.4076471, 0.4117647, 0.4158824, 0.42, 0.4230883, 0.4261765, 0.4292647, 0.432353, 0.4354412, 0.4385294, 0.4416177, 0.4447059, 0.4477942, 0.4508824, 0.4539706, 0.4570589, 0.4611764, 0.4652942, 0.4694118, 0.4735294, 0.4776471, 0.4817647, 0.4838236, 0.4858823, 0.4879412, 0.4900001, 0.4920588, 0.4941177, 0.4972059, 0.5002942, 0.5033824, 0.5064706, 0.5105882, 0.5147059, 0.5188236, 0.5219118, 0.525, 0.5280883, 0.5311765, 0.5352941, 0.5394118, 0.5435295, 0.547647, 0.5517647, 0.5558824, 0.5583529, 0.5608235, 0.5632941, 0.5657647, 0.5682353, 0.5723529, 0.5764706, 
0.5805883, 0.5847059, 0.5888236, 0.5929412, 0.5960294, 0.5991177, 0.6022058, 0.6052941, 0.6083823, 0.6114706, 0.6145588, 0.6176471, 0.6207353, 0.6238235, 
0.6269117, 0.63, 0.6341177, 0.6382353, 0.642353, 0.6448236, 0.6472941, 0.6497647, 0.6522353, 0.6547059, 0.6608824, 0.6670588, 0.670147, 0.6732353, 0.6763235, 0.6794118, 0.6825, 0.6855883, 0.6886765, 0.6917647, 0.6958824, 0.7, 0.7041177, 0.7065883, 0.7090589, 0.7115294, 0.714, 0.7164706, 0.7205883, 0.7247059, 0.7288236, 0.7329412, 0.7370589, 0.7411765, 0.7436471, 0.7461177, 0.7485883, 0.7510588, 0.7535295, 0.757647, 0.7617648, 0.7658824, 0.7689706, 0.7720589, 0.7751471, 0.7782353, 0.7823529, 0.7864707, 0.7905883, 0.7930588, 0.7955295, 0.798, 0.8004706, 0.8029412, 0.8060294, 0.8091177, 0.8122059, 0.8152942, 0.8276471, 0.8297059, 0.8317648, 0.8338236, 0.8358824, 0.8379413, 0.8400001, 0.8441177, 0.8482353, 0.852353, 0.8564707, 0.8605883, 0.8647059, 0.8671764, 0.8696471, 0.8721176, 0.8745883, 0.8770589, 0.8801471, 0.8832354, 0.8863235, 0.8894118, 0.8935295, 0.8976471, 0.9017648, 0.9042353, 0.906706, 0.9091764, 0.9116471, 0.9141177, 0.9172059, 0.9202942, 0.9233824, 0.9264707, 0.9295588, 0.9326471, 0.9357353, 0.9388236, 0.9429413, 0.9470588, 0.9511765, 0.9542647, 0.957353, 0.9604412, 0.9635295, 0.9676472, 0.9717647, 0.9758824, 0.9789706, 0.9820589, 0.9851471, 0.9882354, 0.9913236, 0.9944118, 0.9975, 1.000588, 1.003059, 
1.005529, 1.008, 1.010471, 1.012941, 1.017059, 1.021176, 1.025294, 1.029412, 1.033529, 1.037647, 1.040118, 1.042588, 1.045059, 1.047529, 1.05, 1.054118, 1.058235, 1.062353, 1.066471, 1.070588, 1.074706, 1.077794, 1.080882, 1.083971, 1.087059, 1.090147, 1.093235, 1.096324, 1.099412, 1.1025, 1.105588, 1.108677, 1.111765, 1.114853, 1.117941, 1.121029, 1.124118, 1.130294, 1.136471, 1.138529, 1.140588, 1.142647, 1.144706, 1.146765, 1.148824, 1.155, 1.161177, 1.164265, 1.167353, 1.170441, 1.17353, 1.177647, 1.181765, 1.185882, 1.19, 1.194118, 1.198235, 1.200706, 1.203176, 1.205647, 1.208118, 1.210588, 1.213676, 1.216765, 1.219853, 1.222941, 1.226029, 1.229118, 1.232206, 1.235294, 1.241471, 1.247647, 1.250118, 1.252588, 1.255059, 1.257529, 1.26, 1.264118, 1.268235, 1.272353, 1.274824, 1.277294, 1.279765, 1.282235, 1.284706, 1.290882, 1.297059, 1.299118, 1.301177, 1.303235, 1.305294, 1.307353, 1.309412, 1.315588, 1.321765, 1.325882, 1.33, 1.334118, 1.336588, 1.339059, 1.341529, 1.344, 1.346471, 1.348941, 1.351412, 1.353882, 1.356353, 1.358824, 1.362941, 1.367059, 1.371176, 1.374265, 1.377353, 1.380441, 1.383529, 1.386, 1.388471, 1.390941, 1.393412, 1.395882, 1.402059, 1.408235, 1.410706, 1.413177, 1.415647, 1.418118, 1.420588, 1.424706, 1.428824, 1.432941, 1.436029, 1.439118, 1.442206, 1.445294, 1.449412, 1.453529, 1.457647, 1.461765, 1.465882, 1.47, 1.472471, 1.474941, 1.477412, 1.479882, 1.482353, 1.486471, 1.490588, 1.494706, 1.498824, 1.502941, 1.507059, 1.509529, 1.512, 1.514471, 1.516941, 1.519412, 1.5225, 1.525588, 
1.528677, 1.531765, 1.537941, 1.544118, 1.547206, 1.550294, 1.553382, 1.556471, 1.559559, 1.562647, 1.565735, 1.568824, 1.575, 1.581177, 1.583647, 1.586118, 1.588588, 1.591059, 1.593529, 1.596618, 1.599706, 1.602794, 1.605882, 1.608971, 1.612059, 1.615147, 1.618235, 1.621324, 1.624412, 1.6275, 1.630588, 1.633677, 1.636765, 1.639853, 1.642941, 1.649118, 1.655294, 1.658382, 1.661471, 1.664559, 1.667647, 1.670735, 1.673824, 1.676912, 1.68, 1.683088, 1.686177, 1.689265, 1.692353, 1.695441, 1.698529, 1.701618, 1.704706, 1.710882, 1.717059, 1.719529, 1.722, 1.724471, 1.726941, 1.729412, 1.7325, 1.735588, 1.738677, 
1.741765, 1.744853, 1.747941, 1.751029, 1.754118, 1.757206, 1.760294, 1.763382, 1.766471, 1.770588, 1.774706, 1.778824, 1.781912, 1.785, 1.788088, 1.791177, 1.794265, 1.797353, 1.800441, 1.80353, 1.809706, 1.815882, 1.818353, 1.820824, 1.823294, 1.825765, 1.828235, 1.832353, 1.836471, 1.840588, 1.843677, 1.846765, 1.849853, 1.852941, 1.857059, 1.861177, 1.865294, 1.867765, 1.870235, 1.872706, 1.875177, 1.877647, 1.881765, 1.885882, 1.89, 1.893088, 1.896177, 
1.899265, 1.902353, 1.90647, 1.910588, 1.914706, 1.917794, 1.920882, 1.923971, 1.927059, 1.930147, 1.933235, 1.936324, 1.939412, 1.9425, 1.945588, 1.948677, 1.951765, 1.954853, 1.957941, 1.96103, 1.964118, 1.970294, 1.976471, 1.979559, 1.982647, 1.985735, 1.988824, 1.991912, 1.995, 1.998088, 2.001177, 2.003647, 2.006118, 2.008588, 2.011059, 2.01353, 2.019706, 2.025882, 2.028971, 2.032059, 2.035147, 2.038235, 2.041324, 2.044412, 2.0475, 2.050588, 2.054706, 2.058824, 2.062941, 2.06603, 2.069118, 2.072206, 2.075294, 2.077765, 2.080235, 2.082706, 2.085176, 2.087647, 2.093824, 2.1, 2.102471, 2.104941, 2.107412, 2.109882, 2.112353, 2.116471, 2.120588, 2.124706, 2.127794, 2.130883, 2.133971, 2.137059, 2.140147, 2.143235, 2.146324, 2.149412, 2.155588, 2.161765, 2.164235, 2.166706, 2.169177, 2.171647, 2.174118, 2.178235, 2.182353, 2.186471, 2.192647, 2.198824, 2.200588, 2.202353, 2.204118, 2.205882, 2.207647, 2.209412, 
2.211177, 2.214265, 2.217353, 2.220441, 2.22353, 2.226618, 2.229706, 2.232794, 2.235883, 2.238971, 2.242059, 2.245147, 2.248235, 2.252353, 2.256471, 2.260588, 2.263677, 2.266765, 2.269853, 2.272941, 2.277059, 2.281177, 2.285294, 2.287765, 2.290235, 2.292706, 2.295177, 2.297647, 2.301765, 2.305882, 2.31, 2.313088, 2.316177, 2.319265, 2.322353, 2.325441, 2.32853, 2.331618, 2.334706, 2.337794, 2.340883, 2.343971, 2.347059, 2.351177, 2.355294, 2.359412, 2.3625, 
2.365588, 2.368677, 2.371765, 2.375882, 2.38, 2.384118, 2.386588, 2.389059, 2.39153, 2.394, 2.396471, 2.399559, 2.402647, 2.405735, 2.408823, 2.411912, 2.415, 2.418088, 2.421176, 2.425294, 2.429412, 2.433529, 2.435588, 2.437647, 2.439706, 2.441765, 2.443824, 2.445882, 2.452059, 2.458235, 2.460294, 2.462353, 2.464412, 2.466471, 2.468529, 2.470588, 2.473059, 2.475529, 2.478, 2.480471, 2.482941, 2.487059, 2.491177, 2.495294, 2.499412, 2.50353, 2.507647, 2.510735, 2.513824, 2.516912, 2.52, 2.523088, 2.526176, 2.529265, 2.532353, 2.534824, 2.537294, 2.539765, 2.542235, 2.544706, 2.548824, 2.552941, 2.557059, 2.560147, 2.563235, 2.566324, 2.569412, 2.571471, 2.573529, 2.575588, 2.577647, 2.579706, 2.581765, 2.584235, 2.586706, 2.589177, 2.591647, 2.594118, 2.597206, 2.600294, 2.603382, 2.606471, 2.610588, 2.614706, 2.618824, 2.620883, 2.622941, 2.625, 2.627059, 2.629118, 2.631176, 2.633647, 2.636118, 2.638588, 2.641059, 2.643529, 2.646618, 2.649706, 2.652794, 2.655882, 2.658353, 2.660824, 2.663294, 2.665765, 2.668235, 2.670294, 2.672353, 2.674412, 2.676471, 2.67853, 2.680588, 2.683676, 2.686765, 2.689853, 2.692941, 2.695412, 2.697882, 2.700353, 2.702824, 2.705294, 2.708382, 2.711471, 2.714559, 2.717647, 2.719706, 2.721765, 2.723824, 2.725883, 2.727941, 2.73, 2.733088, 2.736176, 2.739265, 2.742353, 2.744412, 2.746471, 2.748529, 2.750588, 2.752647, 2.754706, 2.757176, 2.759647, 2.762118, 2.764588, 2.767059, 2.769529, 2.772, 2.774471, 2.776941, 2.779412, 2.781471, 2.78353, 2.785588, 2.787647, 2.789706, 2.791765, 2.794235, 2.796706, 2.799177, 2.801647, 2.804118, 2.807206, 2.810294, 2.813382, 2.816471, 2.818235, 2.82, 2.821765, 2.823529, 2.825294, 2.827059, 2.828824, 2.830883, 2.832941, 2.835, 2.837059, 2.839118, 2.841177, 2.843647, 2.846118, 2.848588, 2.851059, 2.853529, 2.856618, 2.859706, 2.862794, 2.865882, 2.867647, 2.869412, 2.871177, 2.872941, 2.874706, 2.876471, 2.878235, 2.880294, 2.882353, 2.884412, 2.886471, 2.88853, 2.890588, 2.891961, 2.893333, 2.894706, 2.896079, 2.897451, 2.898824, 2.900196, 2.901569, 2.902941, 2.905412, 2.907882, 2.910353, 2.912824, 2.915294, 2.917059, 2.918824, 2.920588, 2.922353, 2.924118, 2.925883, 2.927647, 2.929706, 2.931765, 2.933824, 2.935883, 2.937941, 2.94, 2.941765, 2.94353, 2.945294, 2.947059, 2.948823, 2.950588, 2.952353, 2.955441, 2.958529, 2.961618, 2.964706, 2.96625, 2.967794, 2.969338, 2.970882, 2.972427, 2.973971, 2.975515, 2.977059, 2.979118, 2.981177, 2.983235, 2.985294, 2.987353, 2.989412, 2.991177, 2.992941, 2.994706, 2.996471, 2.998235, 3.0, 3.001765, 3.004853, 3.007941, 3.011029, 3.014118, 3.015353, 3.016588, 3.017824, 3.019059, 3.020294, 3.02153, 3.022765, 3.024, 3.025235, 3.026471, 3.028235, 3.03, 3.031765, 3.03353, 3.035294, 3.037059, 3.038824, 3.041294, 3.043765, 3.046236, 3.048706, 3.051177, 3.052721, 3.054265, 3.055809, 3.057353, 3.058897, 3.060441, 3.061985, 3.063529, 3.065294, 3.067059, 3.068824, 3.070588, 3.072353, 3.074118, 3.075882, 3.077647, 3.079412, 3.081177, 3.082941, 3.084706, 3.086471, 3.088235, 3.09, 3.091765, 3.093529, 3.095294, 3.097059, 3.098824, 3.100588, 3.102647, 3.104706, 3.106765, 3.108824, 3.110882, 3.112941, 3.114486, 3.11603, 3.117574, 3.119118, 3.120662, 3.122206, 3.12375, 3.125294, 3.143824] 


NOM_RES = 10000
SER_RES = 9820
TEMP_NOM = 25
NUM_SAMPLES = 25
THERM_B_COEFF = 3950
ADC_MAX = 1023
ADC_Vmax = 3.15
class TemperatureSensor:
    def __init__(self, pinNumber) -> None:
        self.adc = ADC(Pin(pinNumber))
        self.adc.atten(ADC.ATTN_11DB)
        self.adc.width(ADC.WIDTH_10BIT)
        
    def init_temp_sensor(TENP_SENS_ADC_PIN_NO = 26):
        adc = ADC(Pin(TENP_SENS_ADC_PIN_NO))
        adc.atten(ADC.ATTN_11DB)
        adc.width(ADC.WIDTH_10BIT)
        return adc

    def read_temp(temp_sens):
        raw_read = []
        # Collect NUM_SAMPLES
        for i in range(1, NUM_SAMPLES+1):
            raw_read.append(temp_sens.read())

        # Average of the NUM_SAMPLES and look it up in the table
        raw_average = sum(raw_read)/NUM_SAMPLES
        print('raw_avg = ' + str(raw_average))
        print('V_measured = ' + str(adc_V_lookup[round(raw_average)]))

        # Convert to resistance
        raw_average = ADC_MAX * adc_V_lookup[round(raw_average)]/ADC_Vmax
        resistance = (SER_RES * raw_average) / (ADC_MAX - raw_average)
        print('Thermistor resistance: {} ohms'.format(resistance))

        # Convert to temperature
        steinhart  = -log(resistance / NOM_RES) / THERM_B_COEFF
        steinhart += 1.0 / (TEMP_NOM + 273.15)
        steinhart  = (1.0 / steinhart) - 273.15
        return steinhart
    


